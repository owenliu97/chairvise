{"remainingRequest":"C:\\Users\\Liu Ruiping\\Documents\\course-profile-mcomp\\proj\\chairvise3-0-final\\src\\web\\app\\node_modules\\vue-loader\\lib\\index.js??vue-loader-options!C:\\Users\\Liu Ruiping\\Documents\\course-profile-mcomp\\proj\\chairvise3-0-final\\src\\web\\app\\src\\components\\sectionDetail\\GraphNetworkSectionDetail.vue?vue&type=script&lang=js&","dependencies":[{"path":"C:\\Users\\Liu Ruiping\\Documents\\course-profile-mcomp\\proj\\chairvise3-0-final\\src\\web\\app\\src\\components\\sectionDetail\\GraphNetworkSectionDetail.vue","mtime":1573697856000},{"path":"C:\\Users\\Liu Ruiping\\Documents\\course-profile-mcomp\\proj\\chairvise3-0-final\\src\\web\\app\\node_modules\\cache-loader\\dist\\cjs.js","mtime":499162500000},{"path":"C:\\Users\\Liu Ruiping\\Documents\\course-profile-mcomp\\proj\\chairvise3-0-final\\src\\web\\app\\node_modules\\babel-loader\\lib\\index.js","mtime":499162500000},{"path":"C:\\Users\\Liu Ruiping\\Documents\\course-profile-mcomp\\proj\\chairvise3-0-final\\src\\web\\app\\node_modules\\cache-loader\\dist\\cjs.js","mtime":499162500000},{"path":"C:\\Users\\Liu Ruiping\\Documents\\course-profile-mcomp\\proj\\chairvise3-0-final\\src\\web\\app\\node_modules\\vue-loader\\lib\\index.js","mtime":499162500000}],"contextDependencies":[],"result":["//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n\nimport BasicSectionDetail from '@/components/sectionDetail/BasicSectionDetail.vue'\nimport GraphNetwork from '@/components/sectionDetail/chart/GraphNetwork.vue'\nimport {generateBackgroundColor} from '@/common/color'\n\nexport default {\n  name: \"GraphNetworkSectionDetail\",\n\n  props: {\n    sectionDetail: {\n      type: Object,\n      required: true\n    },\n    presentationId: {\n      type: String,\n      required: true\n    },\n    version: {\n      type: String, \n      required: true\n    }\n  },\n\n  data() {\n    return {\n      nodes: [],\n      links: [],\n      options: {},\n      partialResult: [],\n    }\n  },\n\n  computed: {\n    hasData() {\n      return this.nodes.length !== 0;\n    },\n  },\n\n  methods: {\n    showNodeDetails(event, node) {\n      let newNodeMsg;\n      if (this.$nodeMsg !== undefined) {\n        newNodeMsg = this.$nodeMsg;\n      }\n      newNodeMsg += node._labelClass;\n      this.$message({\n        showClose: true,\n        title: 'Information',\n        message: newNodeMsg\n      });\n    },\n    showLinkDetails(event, link) {\n      var info = [this.nodes[link.sid]._labelClass, this.nodes[link.tid]._labelClass, link.name];\n      var newMsg = \"\";\n      for(var i = 0; i < info.length; i++) {\n        newMsg += info[i];\n        if (this.$linkMsg[i].msg !== undefined) {\n          newMsg += this.$linkMsg[i].msg;\n        }\n      }\n      this.$message({\n        showClose: true,\n        title: 'Information',\n        message: newMsg\n      });\n    },\n    updateVisualisation({result, selections, extraData}) {\n      let i;\n      this.partialResult = result.slice(0, extraData.numOfResultToDisplay);\n\n      this.$nodeMsg = extraData.nodeMessage;\n      this.$linkMsg = extraData.linkMessage;\n\n      // Add distinct nodes to the network graph\n      let distinctNodesSet = new Set();\n      this.partialResult.forEach(res => {\n        distinctNodesSet.add(res[selections[0].rename]);\n        distinctNodesSet.add(res[selections[1].rename]);\n      });\n\n      let distinctNodesArray = Array.from(distinctNodesSet);\n      let distinctNodes = [];\n      for(i = 0; i < distinctNodesArray.length; i++) {\n        distinctNodes[i] = {\n          id: i,\n          name: \"#\" + (i + 1),\n          _labelClass: distinctNodesArray[i],\n        };\n      }\n\n      var nodeSizeList = [];\n      for (i = 0; i<distinctNodes.length; i++){\n        nodeSizeList.push(0);\n      }\n\n      let graphLinks = [];\n      this.partialResult.forEach((element, index) => {\n        var num_entry = element[selections[2].rename];\n        graphLinks[index] = {\n          sid: distinctNodes.filter(x => x._labelClass == element[selections[0].rename]).map(x => x.id)[0],\n          tid: distinctNodes.filter(x => x._labelClass == element[selections[1].rename]).map(x => x.id)[0],\n          name: String(num_entry),\n          _svgAttrs:{'stroke-width': -(8/num_entry)+10}\n        };\n        //console.log(graphLinks[index]['sid'],graphLinks[index]['tid'], num_entry);\n        nodeSizeList[graphLinks[index]['sid']] += num_entry;\n        nodeSizeList[graphLinks[index]['tid']] += num_entry;\n        //console.log(nodeSizeList);\n      });\n\n      nodeSizeList.forEach((element, index) =>{\n        distinctNodes[index]['_size'] = -(30/element)+40;\n      });\n      if (extraData.isColorfulBar) {\n        distinctNodes.forEach((node,index) => {\n          node._color = generateBackgroundColor(this.partialResult.length)[index % this.partialResult.length];\n        })\n        graphLinks.forEach((link, index) => {\n          link._color = generateBackgroundColor(this.partialResult.length)[index % this.partialResult.length];\n        })\n      } else {\n        distinctNodes.forEach(node => {\n          node._color = generateBackgroundColor(this.partialResult.length)[this.partialResult.length - 1];\n        })\n        graphLinks.forEach(link => {\n          link._color = generateBackgroundColor(this.partialResult.length)[this.partialResult.length - 1];\n        })\n      }\n\n      this.nodes = distinctNodes;\n      this.links = graphLinks;\n      this.options = {\n        force: 2000,\n        nodeSize: 30,\n        nodeLabels: true,\n        linkLabels: false,\n        linkWidth: 50,\n        fontSize: 14,\n        canvas: false\n      }\n      //console.log(\"data: \" + this.nodes[0].name);\n    }\n  },\n\n  components: {\n    BasicSectionDetail,\n    GraphNetwork\n  }\n}\n",{"version":3,"sources":["GraphNetworkSectionDetail.vue"],"names":[],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;AA0BA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA","file":"GraphNetworkSectionDetail.vue","sourceRoot":"src/components/sectionDetail","sourcesContent":["<template>\n  <basic-section-detail :section-detail=\"sectionDetail\" :presentation-id=\"presentationId\" :has-data=\"hasData\"\n                        :version=\"version\"\n                        :extraFormItemsRules=\"{}\"\n                        @update-visualisation=\"updateVisualisation\">\n    <GraphNetwork :nodes=\"nodes\" :links=\"links\" :options=\"options\"\n            :nodeClick=\"showNodeDetails\"\n            :linkClick=\"showLinkDetails\"></GraphNetwork>\n\n    <template slot=\"extraFormItems\" slot-scope=\"slotProps\">\n      <el-form-item label=\"Colorful Bar\" prop=\"extraData.isColorfulBar\" v-if=\"slotProps.isInAdvancedMode\">\n        <el-switch\n          v-model=\"slotProps.extraData.isColorfulBar\"\n          active-text=\"Colorful Bar\"\n          inactive-text=\"Single Color Bar\">\n        </el-switch>\n      </el-form-item>\n      <el-form-item label=\"Num of result to display\" prop=\"extraData.numOfResultToDisplay\"\n                    v-if=\"slotProps.isInAdvancedMode\">\n        <el-slider v-model=\"slotProps.extraData.numOfResultToDisplay\" :min=\"5\" :max=\"30\"></el-slider>\n      </el-form-item>\n    </template>\n  </basic-section-detail>\n</template>\n\n<script>\n  import BasicSectionDetail from '@/components/sectionDetail/BasicSectionDetail.vue'\n  import GraphNetwork from '@/components/sectionDetail/chart/GraphNetwork.vue'\n  import {generateBackgroundColor} from '@/common/color'\n  \n  export default {\n    name: \"GraphNetworkSectionDetail\",\n\n    props: {\n      sectionDetail: {\n        type: Object,\n        required: true\n      },\n      presentationId: {\n        type: String,\n        required: true\n      },\n      version: {\n        type: String, \n        required: true\n      }\n    },\n\n    data() {\n      return {\n        nodes: [],\n        links: [],\n        options: {},\n        partialResult: [],\n      }\n    },\n\n    computed: {\n      hasData() {\n        return this.nodes.length !== 0;\n      },\n    },\n\n    methods: {\n      showNodeDetails(event, node) {\n        let newNodeMsg;\n        if (this.$nodeMsg !== undefined) {\n          newNodeMsg = this.$nodeMsg;\n        }\n        newNodeMsg += node._labelClass;\n        this.$message({\n          showClose: true,\n          title: 'Information',\n          message: newNodeMsg\n        });\n      },\n      showLinkDetails(event, link) {\n        var info = [this.nodes[link.sid]._labelClass, this.nodes[link.tid]._labelClass, link.name];\n        var newMsg = \"\";\n        for(var i = 0; i < info.length; i++) {\n          newMsg += info[i];\n          if (this.$linkMsg[i].msg !== undefined) {\n            newMsg += this.$linkMsg[i].msg;\n          }\n        }\n        this.$message({\n          showClose: true,\n          title: 'Information',\n          message: newMsg\n        });\n      },\n      updateVisualisation({result, selections, extraData}) {\n        let i;\n        this.partialResult = result.slice(0, extraData.numOfResultToDisplay);\n\n        this.$nodeMsg = extraData.nodeMessage;\n        this.$linkMsg = extraData.linkMessage;\n\n        // Add distinct nodes to the network graph\n        let distinctNodesSet = new Set();\n        this.partialResult.forEach(res => {\n          distinctNodesSet.add(res[selections[0].rename]);\n          distinctNodesSet.add(res[selections[1].rename]);\n        });\n\n        let distinctNodesArray = Array.from(distinctNodesSet);\n        let distinctNodes = [];\n        for(i = 0; i < distinctNodesArray.length; i++) {\n          distinctNodes[i] = {\n            id: i,\n            name: \"#\" + (i + 1),\n            _labelClass: distinctNodesArray[i],\n          };\n        }\n\n        var nodeSizeList = [];\n        for (i = 0; i<distinctNodes.length; i++){\n          nodeSizeList.push(0);\n        }\n\n        let graphLinks = [];\n        this.partialResult.forEach((element, index) => {\n          var num_entry = element[selections[2].rename];\n          graphLinks[index] = {\n            sid: distinctNodes.filter(x => x._labelClass == element[selections[0].rename]).map(x => x.id)[0],\n            tid: distinctNodes.filter(x => x._labelClass == element[selections[1].rename]).map(x => x.id)[0],\n            name: String(num_entry),\n            _svgAttrs:{'stroke-width': -(8/num_entry)+10}\n          };\n          //console.log(graphLinks[index]['sid'],graphLinks[index]['tid'], num_entry);\n          nodeSizeList[graphLinks[index]['sid']] += num_entry;\n          nodeSizeList[graphLinks[index]['tid']] += num_entry;\n          //console.log(nodeSizeList);\n        });\n\n        nodeSizeList.forEach((element, index) =>{\n          distinctNodes[index]['_size'] = -(30/element)+40;\n        });\n        if (extraData.isColorfulBar) {\n          distinctNodes.forEach((node,index) => {\n            node._color = generateBackgroundColor(this.partialResult.length)[index % this.partialResult.length];\n          })\n          graphLinks.forEach((link, index) => {\n            link._color = generateBackgroundColor(this.partialResult.length)[index % this.partialResult.length];\n          })\n        } else {\n          distinctNodes.forEach(node => {\n            node._color = generateBackgroundColor(this.partialResult.length)[this.partialResult.length - 1];\n          })\n          graphLinks.forEach(link => {\n            link._color = generateBackgroundColor(this.partialResult.length)[this.partialResult.length - 1];\n          })\n        }\n\n        this.nodes = distinctNodes;\n        this.links = graphLinks;\n        this.options = {\n          force: 2000,\n          nodeSize: 30,\n          nodeLabels: true,\n          linkLabels: false,\n          linkWidth: 50,\n          fontSize: 14,\n          canvas: false\n        }\n        //console.log(\"data: \" + this.nodes[0].name);\n      }\n    },\n\n    components: {\n      BasicSectionDetail,\n      GraphNetwork\n    }\n  }\n</script>\n\n<style scoped>\n\n</style>\n\n<style>\n.node{\n  stroke:rgba(18,120,98,.7);\n  stroke-width:2px;\n  -webkit-transition:fill .5s ease;\n  transition:fill .5s ease;\n  fill:#dcfaf3\n}\n.node.selected{\n  stroke:#caa455\n}\n.link{\n  stroke:rgba(18,120,98,.3);\n  /*stroke-width: 2px;*/\n}\n.link,.node{\n  stroke-linecap:round\n}\n.link:hover,.node:hover{\n  stroke-width:5px\n}\n.link.selected{\n  stroke:rgba(202,164,85,.6)\n}\n.curve{\n  fill:none\n}\n.link-label,.node-label{\n  fill:rgba(0,0,0,.6)\n}\n.link-label{\n  -webkit-transform:translateY(-.5em);\n  transform:translateY(-.5em);\n  text-anchor:middle\n}\n</style>"]}]}